<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>API列表</title>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}"/>
    <link rel="stylesheet" th:href="@{/admin/css/pearForm.css}"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row">
        <div id="test1"></div>

    </div>
</div>
<script th:src="@{/layui/layui.js}"></script>
<script th:src="@{/admin/js/jquery.js}"></script>
<script>

    var treeData = null;

    var clientId = [[${clientId}]];
    var ap = [[${ap}]];

    var requestURL = "/restdoc/serviceClient/" + clientId + "/apiList?ap=" + ap;

    $.ajax({
        type: 'GET',
        contentType: 'application/json;charset=utf-8',
        url: requestURL,
        async: false,
        success: function (data) {
            if (data['code'] === "200") {
                treeData = data['data'];
            } else {
                layer.msg(data['message']);
            }
        },
        error: function () {
            layer.msg("网络异常")
        }
    });

    layui.use('tree', function () {
        var tree = layui.tree;
        //渲染
        var inst1 = tree.render({
            elem: '#test1',
            data: treeData
        });
    });
</script>
</body>
</html>